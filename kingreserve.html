<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Big Family Room - Yabut River Resort</title>
<style>
  /* Reset and base */
  body, h1, p, ul, li, div {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    font-family: 'Times New Roman', Times, serif, Arial, sans-serif;
    background: #e5e0dc;
    color: #1d1d1d;
    line-height: 1.5;
  }
  a, button {
    font-family: inherit;
  }

  /* Header */
  header {
    background-color: #0f3e1b;
    color: #e4ebdd;
    font-weight: 400;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 20px;
  }
  header .brand {
    font-size: 20px;
  }
  header .location {
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  header .location svg {
    fill: #e4ebdd;
    width: 16px;
    height: 16px;
  }
  header .profile-img {
    width: 33px;
    height: 33px;
    border-radius: 50%;
    object-fit: cover;
    margin-left: 20px;
  }

  /* Container */
  main {
    max-width: 1000px;
    margin: 40px auto 80px;
    padding: 0 20px;
    display: grid;
    grid-template-columns: 1fr 300px;
    gap: 36px;
  }

  /* Back arrow above images */
  .back-arrow {
    cursor: pointer;
    font-size: 24px;
    margin-bottom: 12px;
    display: inline-block;
    color: #0f3e1b;
  }

  /* Left content */
  .left-col h1 {
    font-weight: 900;
    font-size: 24px;
    margin-bottom: 14px;
    color: #1d1d1d;
  }

  /* Images */
  .images {
    display: flex;
    gap: 20px;
    margin-bottom: 22px;
  }
  .images .big-img {
    flex: 1.5;
    border: 1px solid #bbb2a8;
    max-height: 225px;
    object-fit: cover;
  }
  .images .right-images {
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    gap: 13px;
  }
  .images .right-images img {
    width: 280px;
    height: 110px;
    object-fit: cover;
    border: 1px solid #bbb2a8;
  }

  /* Description */
  .description p {
    font-weight: 400;
    font-size: 15px;
    margin-bottom: 18px;
    max-width: 620px;
  }
  .description ul {
    list-style: disc;
    margin-left: 20px;
    color: #1d1d1d;
  }
  .description ul li {
    font-size: 15px;
    padding-bottom: 5px;
  }

  /* Booking box */
  .booking-box {
    background: #f3f1ec;
    padding: 40px 24px 10px;  
    border: 1px solid #b1cc9b;
    font-size: 15px;
    display: flex;
    flex-direction: column;
    height: 400px;
    position: relative;
  }
  .price {
    font-weight: 700;
    font-size: 22px;
    margin-bottom: 18px;
  }
  .price small {
    font-weight: 300;
    font-size: 15px;
  }

  .booking-row {
    display: flex;
    justify-content: space-between;
    margin-bottom: 14px;
  }
  .booking-col {
    width: 48%;
  }
  label {
    display: block;
    font-weight: 600;
    padding-bottom: 3px;
    color: #333;
  }

  /* UPDATED SELECT WITH ARROW ICON */
  select {
    width: 100%;
    padding: 4px 30px 4px 6px; /* space for arrow */
    border: 1px solid #9da888;
    border-radius: 2px;
    font-size: 14px;
    outline: none;
    background-color: white;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    cursor: pointer;

    /* dropdown arrow */
    background-image: url("data:image/svg+xml;utf8,<svg fill='%230f3e1b' height='14' viewBox='0 0 20 20' width='14' xmlns='http://www.w3.org/2000/svg'><polygon points='0,0 20,0 10,10'/></svg>");
    background-repeat: no-repeat;
    background-position: right 8px center;
    background-size: 12px;
  }

  .guests-select {
    margin-bottom: 14px;
  }

  .calc-row {
    display: flex;
    justify-content: space-between;
    font-size: 14px;
    margin-bottom: 5px;
  }
  .calc-row:nth-child(1) {
    font-weight: 700;
  }
  .calc-row:not(:first-child):not(:last-child) {
    opacity: 0.7;
  }

  .total-row {
    font-weight: 700;
    margin-top: 8px;
    border-top: 1px solid #b1cc9b;
    padding-top: 8px;
    font-size: 15px;
  }

  button.reserve-btn {
    margin-top: 14px;
    width: 100%;
    background-color: #000;
    color: #fff;
    border: none;
    height: 36px;
    font-weight: 700;
    font-size: 14px;
    cursor: pointer;
    text-transform: capitalize;
  }

  .confirmation {
    position: absolute;
    bottom: 10px;
    left: 50%;
    transform: translateX(-50%);
    color: green;
    font-weight: 700;
    text-align: center;
    font-size: 14px;
  }

</style>
</head>
<body>
<header>
  <div class="brand">Yabut River Resort</div>
  <div style="display:flex; align-items:center;">
    <div class="location">
      <svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5S10.62 6.5 12 6.5s2.5 1.12 2.5 2.5S13.38 11.5 12 11.5z"></path></svg>
      Location: Calaca Batangas
    </div>
    <img src="https://i.ibb.co/w6CYDDw/profile-cat.jpg" alt="User Profile" class="profile-img" />
  </div>
</header>

<main>
  <section class="left-col">
    <span class="back-arrow" onclick="window.history.back()">←</span>
    <h1>Big Family Room</h1>
    <div class="images">
      <img class="big-img" src="https://cf.bstatic.com/xdata/images/hotel/max1024x768/532505664.jpg?k=186a14b53cc7fdee3f26fd7fd1f11d8577440154fe34b68455c98741c6950893&o=" alt="Big Family Room main" />
      <div class="right-images">
        <img src="https://cf.bstatic.com/xdata/images/hotel/max1024x768/532505664.jpg?k=186a14b53cc7fdee3f26fd7fd1f11d8577440154fe34b68455c98741c6950893&o=" alt="Bathroom" />
        <img src="https://cf.bstatic.com/xdata/images/hotel/max1024x768/532505664.jpg?k=186a14b53cc7fdee3f26fd7fd1f11d8577440154fe34b68455c98741c6950893&o=" alt="Dining area" />
      </div>
    </div>
    <div class="description">
      <p>A spacious and cozy space ideal for family gatherings and relaxation. It’s perfect for bonding, entertainment, and creating lasting memories together.</p>
      <ul>
        <li>Good for 10 pax</li>
        <li>With own comfort rooms, kitchen & dining area</li>
        <li>5 Queen sized bed plus Extra pull out bed</li>
        <li>With 10 towels</li>
      </ul>
    </div>
  </section>

  <aside class="booking-box" aria-label="Booking details and reservation">
    <div class="price">₱ 12,000 <small>night</small></div>

    <div class="booking-row">
      <div class="booking-col">
        <label for="checkin">Check in</label>
        <select id="checkin" name="checkin">
          <option value="2025-06-23" selected>6/23/2025</option>
          <option value="2025-06-24">6/24/2025</option>
          <option value="2025-06-25">6/25/2025</option>
        </select>
      </div>
      <div class="booking-col">
        <label for="checkout">Check out</label>
        <select id="checkout" name="checkout">
          <option value="2025-06-26" selected>6/26/2025</option>
          <option value="2025-06-27">6/27/2025</option>
          <option value="2025-06-28">6/28/2025</option>
        </select>
      </div>
    </div>

    <div class="guests-select">
      <label for="guests">Guests</label>
      <select id="guests" name="guests">
        <option value="4">4 guests</option>
        <option value="6" selected>6 guests</option>
        <option value="8">8 guests</option>
        <option value="10">10 guests</option>
      </select>
    </div>

    <div class="calc-row">
      <span>₱ 12,000 x 3 nights</span><span>₱ 36,000</span>
    </div>
    <div class="calc-row">
      <span>service fee</span><span>₱ 500</span>
    </div>

    <div class="total-row">
      Total
    </div>

    <button class="reserve-btn" onclick="confirmReservation()">Reserve</button>
    <div class="confirmation" id="confirmation"></div>
  </aside>
</main>

<script>
const pricePerGroup = 2500; 
const serviceFee = 200;

function updateTotal() {
    const checkin = new Date(document.getElementById('checkin').value);
    const checkout = new Date(document.getElementById('checkout').value);

    // Calculate number of nights
    const timeDiff = checkout - checkin;
    let nights = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
    
    const totalRow = document.querySelector('.total-row');
    const guests = document.getElementById('guests').value;
    
    // --- Validation and Display ---
    if (nights <= 0 || isNaN(nights)) {
        document.querySelector('.calc-row span:first-child').textContent = `₱ ${pricePerGroup} x 0 nights`;
        document.querySelector('.calc-row span:last-child').textContent = `₱ 0`;
        totalRow.textContent = "Total: Please select valid dates.";
        return false; // Return false if invalid
    }

    const subtotal = pricePerGroup * nights;
    const total = subtotal + serviceFee;

    document.querySelector('.calc-row span:first-child').textContent = `₱ ${pricePerGroup} x ${nights} night${nights > 1 ? 's' : ''}`;
    document.querySelector('.calc-row span:last-child').textContent = `₱ ${subtotal.toLocaleString('en-US')}`;
    totalRow.textContent = `Total for ${guests} guest${guests > 1 ? 's' : ''}: ₱ ${total.toLocaleString('en-US')}`;

    return total; // Return the total if successful
}

// Event listeners
document.getElementById('guests').addEventListener('change', updateTotal);
document.getElementById('checkin').addEventListener('change', updateTotal);
document.getElementById('checkout').addEventListener('change', updateTotal);

// ⭐ UPDATED: Data Saving and Redirection Logic ⭐
function confirmReservation() {
    const total = updateTotal(); // Recalculate and validate dates

    const confirmationDiv = document.getElementById('confirmation');
    
    // Check if total is valid (updateTotal returns the number or false)
    if (total === false) {
        confirmationDiv.textContent = "❗ Please select valid check-in and check-out dates.";
        confirmationDiv.style.color = 'red';
        return;
    }

    const checkin = document.getElementById('checkin').value;
    const checkout = document.getElementById('checkout').value;
    const guests = document.getElementById('guests').options[document.getElementById('guests').selectedIndex].text;
    
    // 1. Package the new booking object
    const newBooking = {
        id: Date.now(), // Unique ID
        room: document.querySelector('h1').textContent, // "Antique Room"
        checkInDate: checkin,
        checkOutDate: checkout,
        guests: guests,
        totalPrice: total.toLocaleString('en-US'), // Format the final price
        status: 'Pending' 
    };

    // 2. Retrieve existing bookings or initialize an empty array
    let existingBookings = JSON.parse(localStorage.getItem('userBookings')) || [];
    
    // 3. Add the new booking to the list
    existingBookings.push(newBooking);

    // 4. Save the updated list back to localStorage
    localStorage.setItem('userBookings', JSON.stringify(existingBookings));

    // Show confirmation and redirect to profile page
    confirmationDiv.textContent = "✅ Your reservation has been successfully made!";
    confirmationDiv.style.color = 'green';
    
    setTimeout(() => {
        // ⭐ UPDATED: Redirect to the profile page to see the new booking
        window.location.href = 'profile.html'; 
    }, 2000);
}

// Initialize total on page load
updateTotal();


  // Function to load the profile picture from localStorage
    function loadProfilePicture() {
        // Retrieve the saved photo data (Data URL) from localStorage
        const profilePic = localStorage.getItem("photo");
        const imgElement = document.getElementById("header-profile-pic");
        
        // If a saved photo is found, update the image source
        if (profilePic && imgElement) {
            imgElement.src = profilePic;
        }
    }

    // Call the function when the page loads
    window.onload = loadProfilePicture;
    
</script>



</body>
</html>
